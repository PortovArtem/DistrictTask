<!DOCTYPE html>
<html lang="ru" class="transition-colors duration-500">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{% block title %}DistrictTask{% endblock %}</title>
<script src="https://unpkg.com/lucide@latest"></script>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body {
    font-family: 'Inter', sans-serif;
    min-height: 100vh;
    transition: color 0.3s;
}

/* Градиент светлой темы */
.animated-gradient {
    background: linear-gradient(
        120deg,
        #a8edea,
        #fed6e3,
        #cfd9df,
        #e2ebf0
    );
    background-size: 400% 400%;
    animation: gradientFlow 15s ease infinite; /* ускорено на ~25% */
}

/* Градиент тёмной темы */
.dark .animated-gradient {
    background: linear-gradient(
        120deg,
        #0f172a,
        #1e293b,
        #334155,
        #1e293b
    );
    background-size: 400% 400%;
    animation: gradientFlow 15s ease infinite; /* ускорено на ~25% */
}

/* Белый текст в тёмной теме */
.dark * {
    color: #fff !important;
}

/* Поля ввода: чёрный текст в тёмной теме */
input, textarea, select {
    @apply w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-300 text-gray-900 dark:text-black placeholder-gray-400 dark:placeholder-gray-600;
}

@keyframes gradientFlow {
    0%   { background-position: 0% 50%; }
    50%  { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.glass-panel {
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
}

.dark .glass-panel {
    background: rgba(15, 23, 42, 0.8);
}

/* Кнопка темы с градиентной подсветкой */
#themeToggle {
    position: relative;
    padding: 0.75rem;
    border-radius: 1rem;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    background-color: #e5e7eb; /* светлая кнопка */
}
.dark #themeToggle {
    background-color: #374151; /* тёмная кнопка */
}
#themeToggle::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(45deg, #3b82f6, #8b5cf6, #ec4899, #f59e0b);
    opacity: 0;
    transition: opacity 0.5s ease;
    border-radius: 1rem;
}
#themeToggle:hover::before {
    opacity: 0.3;
}
#themeToggle i {
    transition: transform 0.7s ease;
}
#themeToggle:hover i {
    transform: rotate(180deg);
}
</style>
</head>
<body class="animated-gradient min-h-screen flex flex-col font-sans">

<header class="bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm shadow-md p-4 flex justify-between items-center w-full sticky top-0 z-10">
    <a href="/" class="text-xl font-bold text-gray-800 dark:text-white">DistrictTask</a>
    <nav class="flex items-center gap-4">
        <a href="{% url 'login' %}" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium">Войти</a>
        <a href="{% url 'register' %}" class="text-white bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition shadow-lg">Регистрация</a>

        <!-- Кнопка переключения темы -->
        <button id="themeToggle" title="Переключить тему">
            <i id="moonIcon" data-lucide="moon" class="w-6 h-6"></i>
            <i id="sunIcon" data-lucide="sun" class="w-6 h-6"></i>
        </button>
    </nav>
</header>

<main class="flex-grow container mx-auto p-4 flex items-center justify-center">
    {% block auth_content %}
    {% endblock %}
</main>

<footer class="bg-gray-800 dark:bg-gray-950 text-white p-4 text-center mt-auto w-full">
    <p>© 2025 DistrictTask</p>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function() {
    lucide.createIcons();

    const themeToggle = document.getElementById('themeToggle');
    const sunIcon = document.getElementById('sunIcon');
    const moonIcon = document.getElementById('moonIcon');

    function updateIcons() {
        if(document.documentElement.classList.contains('dark')){
            sunIcon.style.display = 'none';
            moonIcon.style.display = 'inline-block';
        } else {
            sunIcon.style.display = 'inline-block';
            moonIcon.style.display = 'none';
        }
    }

    // Инициализация темы
    if (localStorage.getItem('theme') === 'dark' ||
        (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
    } else {
        document.documentElement.classList.remove('dark');
    }
    updateIcons();

    // Переключение темы
    themeToggle.addEventListener('click', () => {
        document.documentElement.classList.toggle('dark');
        localStorage.setItem('theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
        updateIcons();
    });
});
</script>

</body>
</html>
